"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[769],{9421:(x,h,r)=>{r.d(h,{n:()=>u});class u{constructor(){this.id=""}}},3984:(x,h,r)=>{r.d(h,{M:()=>m});var u=r(6814),o=r(9212);let m=(()=>{class c{static#t=this.\u0275fac=function(i){return new(i||c)};static#e=this.\u0275cmp=o.Xpm({type:c,selectors:[["app-dashboard"]],standalone:!0,features:[o.jDz],decls:2,vars:0,consts:[[1,"p-8","text-2xl","font-semibold","text-center"]],template:function(i,a){1&i&&(o.TgZ(0,"h1",0),o._uU(1,"Tableau de bord administration"),o.qZA())},dependencies:[u.ez]})}return c})()},9303:(x,h,r)=>{r.d(h,{d:()=>L});var u=r(6814),o=r(6223),m=r(9421),c=r(71),f=r(8525),t=r(9212),i=r(8109),a=r(9347),P=r(3382),y=r(9862);let w=(()=>{class s{constructor(l){this.http=l,this.baseUrl="http://localhost:3000/super/user"}updateUser(l,e){return this.http.put(`${this.baseUrl}/${l}`,e)}static#t=this.\u0275fac=function(e){return new(e||s)(t.LFG(y.eN))};static#e=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var C=r(4170),T=r(2296),n=r(617),E=r(4516);const g=["popupTemplate"],d=["DeletePoppup"];function I(s,_){1&s&&(t.TgZ(0,"mat-error",27),t._uU(1," Ce champ est obligatoire "),t.qZA())}function Z(s,_){1&s&&(t.TgZ(0,"mat-error",27),t._uU(1," Nom doit contenir plus que 2 lettres "),t.qZA())}function F(s,_){1&s&&(t.TgZ(0,"mat-error",27),t._uU(1," Ce champ est obligatoire "),t.qZA())}function b(s,_){1&s&&(t.TgZ(0,"mat-error",27),t._uU(1," Pr\xe9nom doit contenir plus que 2 lettres "),t.qZA())}function U(s,_){1&s&&(t.TgZ(0,"mat-error",27),t._uU(1," Ce champ est obligatoire "),t.qZA())}function A(s,_){1&s&&(t.TgZ(0,"mat-error",27),t._uU(1," Veuillez saisir une adresse \xe9lectronique valide "),t.qZA())}function N(s,_){1&s&&t._UZ(0,"mat-icon",28),2&s&&t.Q6J("svgIcon","heroicons_solid:eye")}function M(s,_){1&s&&t._UZ(0,"mat-icon",28),2&s&&t.Q6J("svgIcon","heroicons_solid:eye-slash")}function O(s,_){1&s&&(t.TgZ(0,"mat-error",27),t._uU(1," Ce champ est obligatoire. "),t.qZA())}function $(s,_){1&s&&(t.TgZ(0,"mat-error",27),t._uU(1," Le mot de passe doit contenir au moins 8 caract\xe8res. "),t.qZA())}function z(s,_){1&s&&(t.TgZ(0,"mat-error",27),t._uU(1," Le mot de passe doit contenir au moins un caract\xe8re sp\xe9cial. "),t.qZA())}function D(s,_){if(1&s&&(t.TgZ(0,"option",29),t._uU(1),t.qZA()),2&s){const l=_.$implicit;t.Q6J("value",l._id),t.xp6(1),t.hij("Class ",l.nom,"")}}function Q(s,_){1&s&&(t.TgZ(0,"p",30),t._uU(1," Ce champ est obligatoire "),t.qZA())}function J(s,_){if(1&s){const l=t.EpF();t.TgZ(0,"form",5),t.NdJ("ngSubmit",function(){t.CHM(l);const p=t.oxw();return t.KtG(p.myForm.valid&&p.update(p.myForm.value))}),t.TgZ(1,"h1",6),t._uU(2),t.qZA(),t.TgZ(3,"div",7)(4,"app-upload",8),t.NdJ("dataEvent",function(p){t.CHM(l);const v=t.oxw();return t.KtG(v.receiveData(p))}),t.qZA()(),t.TgZ(5,"div",9)(6,"mat-form-field",10)(7,"mat-label"),t._uU(8,"Nom"),t.qZA(),t._UZ(9,"mat-icon",11)(10,"input",12),t.YNc(11,I,2,0,"mat-error",13)(12,Z,2,0,"mat-error",13),t.qZA(),t.TgZ(13,"mat-form-field",10)(14,"mat-label"),t._uU(15,"Pr\xe9nom"),t.qZA(),t._UZ(16,"mat-icon",11)(17,"input",14),t.YNc(18,F,2,0,"mat-error",13)(19,b,2,0,"mat-error",13),t.qZA()(),t.TgZ(20,"div",15)(21,"mat-form-field",10)(22,"mat-label"),t._uU(23,"Adresse-mail"),t.qZA(),t._UZ(24,"input",16),t.YNc(25,U,2,0,"mat-error",13)(26,A,2,0,"mat-error",13),t.qZA()(),t.TgZ(27,"mat-form-field",10)(28,"mat-label"),t._uU(29,"Modifier le mot de passe : "),t.qZA(),t._UZ(30,"input",17,18),t.TgZ(32,"button",19),t.NdJ("click",function(){t.CHM(l);const p=t.MAs(31);return t.KtG(p.type="password"===p.type?"text":"password")}),t.YNc(33,N,1,1,"mat-icon",20)(34,M,1,1,"mat-icon",20),t.qZA(),t.YNc(35,O,2,0,"mat-error",13)(36,$,2,0,"mat-error",13)(37,z,2,0,"mat-error",13),t.qZA(),t.TgZ(38,"label",21),t._uU(39,"Classes"),t.qZA(),t.TgZ(40,"select",22),t.NdJ("change",function(p){t.CHM(l);const v=t.oxw();return t.KtG(v.idClassValue(p.target.value))}),t.YNc(41,D,2,2,"option",23),t.qZA(),t.YNc(42,Q,2,0,"p",24),t.TgZ(43,"button",25)(44,"span",26),t._uU(45,"Enregistrer"),t.qZA()()()}if(2&s){const l=t.MAs(31),e=t.oxw();t.Q6J("formGroup",e.myForm),t.xp6(2),t.AsE(" Bonjour ",e.user.lastName," ",e.user.firstName," "),t.xp6(2),t.Q6J("folder","users")("image",e.user.photo),t.xp6(5),t.Q6J("svgIcon","heroicons_solid:user-circle"),t.xp6(2),t.Q6J("ngIf",null==e.myForm.controls.lastName.errors?null:e.myForm.controls.lastName.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.myForm.controls.lastName.errors?null:e.myForm.controls.lastName.errors.minlength),t.xp6(4),t.Q6J("svgIcon","heroicons_solid:user-circle"),t.xp6(2),t.Q6J("ngIf",null==e.myForm.controls.firstName.errors?null:e.myForm.controls.firstName.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.myForm.controls.firstName.errors?null:e.myForm.controls.firstName.errors.minlength),t.xp6(6),t.Q6J("ngIf",null==e.myForm.controls.email.errors?null:e.myForm.controls.email.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.myForm.controls.email.errors?null:e.myForm.controls.email.errors.email),t.xp6(4),t.Q6J("type",l.type),t.xp6(3),t.Q6J("ngIf","password"===l.type),t.xp6(1),t.Q6J("ngIf","text"===l.type),t.xp6(1),t.Q6J("ngIf",null==e.myForm.controls.password.errors?null:e.myForm.controls.password.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.myForm.controls.password.errors?null:e.myForm.controls.password.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==e.myForm.controls.password.errors?null:e.myForm.controls.password.errors.pattern),t.xp6(4),t.Q6J("ngForOf",e.classes),t.xp6(1),t.Q6J("ngIf",e.myForm.controls.id_classe.hasError("required")),t.xp6(1),t.Q6J("disabled",!e.myForm.valid)}}function Y(s,_){if(1&s&&(t.TgZ(0,"mat-dialog-content",31)(1,"div",32)(2,"span",33),t._uU(3),t.qZA()()()),2&s){const l=t.oxw();t.xp6(3),t.Oqu(l.poppupMessage)}}let L=(()=>{class s{constructor(l,e,p,v,R){this.fb=l,this.router=e,this.dialog=p,this.uow=v,this.userUpdateService=R,this.id=0,this.user=new m.n,this.isProf=!1,this.commingPwd="",this.poppupMessage="",this.isSuccess=!1,this.classes=[]}ngOnInit(){const l=localStorage.getItem("user");if(l){let e=JSON.parse(l);this.id=e.id}this.uow.users.getOne(this.id).subscribe(e=>{console.log(e),e.success?(this.user=e.data,this.commingPwd=e.data.password,this.role=this.user.role,this.createForm()):this.DeletedUserPoppup(),this.uow.classes.getAll().subscribe(p=>{null!==p?this.classes=p.data:console.log("A problem occurred while fetching data")})})}createForm(){this.myForm=this.fb.group({id:[this.id],lastName:[this.user.lastName,[o.kI.required,o.kI.minLength(3)]],firstName:[this.user.firstName,[o.kI.required,o.kI.minLength(3)]],email:[this.user.email,[o.kI.required,o.kI.email]],password:["",[o.kI.minLength(8),o.kI.pattern(/^(?=.*[!@#$%^&*(),.?":{}|<>])(.{8,})$/)]],role:[this.user.role],id_classe:[this.user.id_classe]})}update(l){""===l.password?delete l.password:l.password=this.commingPwd,this.userUpdateService.updateUser(this.id,l).subscribe(e=>{console.log("Server response:",e),e.success?(this.poppupMessage="Profil mis \xe0 jour",this.ProfilePoppup(),this.isSuccess=!0):(this.poppupMessage="Profil mis \xe0 jour",this.ProfilePoppup(),this.isSuccess=!1)})}closePoppup(){this.dialog.closeAll()}ProfilePoppup(){this.dialog.open(this.popupTemplate,{height:"200px",width:"500px"}).afterClosed().subscribe(e=>{})}DeletedUserPoppup(){this.dialog.open(this.DeletePoppup,{height:"300px",width:"500px"}).afterClosed().subscribe(e=>{})}static#t=this.\u0275fac=function(e){return new(e||s)(t.Y36(o.qu),t.Y36(i.F0),t.Y36(a.uw),t.Y36(P.Z),t.Y36(w))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-profile"]],viewQuery:function(e,p){if(1&e&&(t.Gf(g,5),t.Gf(d,5)),2&e){let v;t.iGM(v=t.CRH())&&(p.popupTemplate=v.first),t.iGM(v=t.CRH())&&(p.DeletePoppup=v.first)}},standalone:!0,features:[t.jDz],decls:8,vars:1,consts:[[1,"flex","flex-col","w-full","h-[100vh]","bg-[#EEEEEE]"],[1,"relative","flex","flex-col","items-center","mt-[3rem]","flex-auto","px-6","sm:px-12"],[1,"w-full","max-w-3xl"],[3,"formGroup","ngSubmit",4,"ngIf"],["popupTemplate",""],[3,"formGroup","ngSubmit"],[1,"mt-6","mb-10","ml-1","text-[#5271FF]","text-3xl","font-semibold"],[1,"flex","items-center","justify-center"],[3,"folder","image","dataEvent"],[1,"flex","flex-col","gap-2","mt-4","md:flex-row"],[1,"w-full"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","formControlName","lastName"],["class","text-red-500",4,"ngIf"],["matInput","","formControlName","firstName","spellcheck","false"],[1,"flex","flex-col","gap-2","mt-2","md:flex-row"],["id","email","matInput","","formControlName","email"],["id","password","matInput","","formControlName","password",3,"type"],["passwordField",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],["for","id_classe",1,"block","font-semibold","text-gray-700","text-[0.9rem]","mt-4"],["id","id_classe","formControlName","id_classe",1,"block","w-full","p-4","mt-1","mb-5","bg-white","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-blue-500","focus:border-blue-500",3,"change"],["class","p-4",3,"value",4,"ngFor","ngForOf"],["class","mt-1 text-sm text-red-500",4,"ngIf"],["type","submit",1,"font-medium","bg-[#5271FF]","hover:bg-[#4261d9]","relative","h-[45px]","w-[7rem]","overflow-hidden","border-[#5271FF]","px-3","border-2","text-white","shadow-2xl","transition-all","duration-300","before:absolute","before:bottom-0","before:left-0","before:top-0","before:z-[-1]","before:h-full","before:w-0","before:bg-[#4261d9]","before:transition-all","before:duration-300","hover:shadow-black","hover:before:left-0","hover:before:w-full","hover:border-[#4261d9]",3,"disabled"],[1,"relative","z-10"],[1,"text-red-500"],[1,"icon-size-5",3,"svgIcon"],[1,"p-4",3,"value"],[1,"mt-1","text-sm","text-red-500"],[1,"bg-[#FEF2F","flex","flex-col","items-center","justify-center","w-full"],[1,"flex","flex-col","items-center","justify-center","w-full","gap-5"],[1,"text-[#5271FF]","font-semibold","text-2xl"]],template:function(e,p){1&e&&(t.TgZ(0,"div",0),t.ynx(1),t.TgZ(2,"div",1)(3,"div",2),t.YNc(4,J,46,22,"form",3),t.qZA()(),t.BQk(),t.qZA(),t.ynx(5),t.YNc(6,Y,4,1,"ng-template",null,4,t.W1O),t.BQk()),2&e&&(t.xp6(4),t.Q6J("ngIf",p.myForm))},dependencies:[u.ez,u.sg,u.O5,f.LD,C.KE,C.hX,C.TO,C.qo,C.R9,o.u5,o._Y,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.JL,o.UX,o.sg,o.u,c.R,T.RK,a.xY,n.Hw,E.Nt]})}return s})()},2333:(x,h,r)=>{r.d(h,{e:()=>c});var u=r(9862),o=r(9212),m=r(553);let c=(()=>{class f{constructor(){this.http=(0,o.f3M)(u.eN),this.url=m.N.url}signUp(i){return this.http.post(`${this.url}/auth/register`,i,{withCredentials:!0})}login(i){return this.http.post(`${this.url}/auth/login`,i,{withCredentials:!0})}logout(){return this.http.post(`${this.url}/auth/logout`,{},{withCredentials:!0})}VerifyCodeProf(i){return this.http.post(`${this.url}/auth/verifyCode`,{code:i},{withCredentials:!0})}static#t=this.\u0275fac=function(a){return new(a||f)};static#e=this.\u0275prov=o.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})()},9497:(x,h,r)=>{r.d(h,{Z:()=>c});var u=r(9862),o=r(9212),m=r(553);let c=(()=>{class f{constructor(){this.http=(0,o.f3M)(u.eN),this.url=m.N.url}getIAanswerFromPdf(i,a){return this.http.post(`${this.url}/${"fiche"===a?"revision/pdf":"carte"===a?"flashcard/pdf":"quizzes/pdf"}`,i,{withCredentials:!0})}getIAanswerFromText(i,a){const y="fiche"===a?{text:i.text,...i.customPrompt&&{customPrompt:i.customPrompt}}:"carte"===a?{content:i.text,...i.customPrompt&&{customPrompt:i.customPrompt}}:{content:i.text};return this.http.post(`${this.url}/${"fiche"===a?"revision":"carte"===a?"flashcard":"quizzes"}`,y,{withCredentials:!0})}static#t=this.\u0275fac=function(a){return new(a||f)};static#e=this.\u0275prov=o.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})()},213:(x,h,r)=>{r.d(h,{m:()=>m});var u=r(9212),o=r(9862);let m=(()=>{class c{constructor(t){this.http=t}getQuizQuestions(t){return this.http.get(`http://localhost:3000/question/quiz/${t}`,{withCredentials:!0})}static#t=this.\u0275fac=function(i){return new(i||c)(u.LFG(o.eN))};static#e=this.\u0275prov=u.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},8737:(x,h,r)=>{r.d(h,{H:()=>c});var u=r(9862),o=r(9212),m=r(553);let c=(()=>{class f{constructor(i){this.controller=i,this.http=(0,o.f3M)(u.eN),this.urlApi=m.N.apiUrl,this.url=m.N.url,this.getAll=()=>this.http.get(`${this.url}/${this.controller}`,{withCredentials:!0}),this.put=(a,P)=>this.http.patch(`${this.url}/${this.controller}/${a}`,P,{withCredentials:!0}),this.get=()=>this.http.get(`${this.url}/${this.controller}/get`,{withCredentials:!0}),this.count=()=>this.http.get(`${this.url}/${this.controller}/count`,{withCredentials:!0}),this.getOne=a=>this.http.get(`${this.url}/${this.controller}/${a}`,{withCredentials:!0}),this.post=a=>this.http.post(`${this.url}/${this.controller}`,a,{withCredentials:!0}),this.delete=a=>this.http.delete(`${this.url}/${this.controller}/${a}`,{withCredentials:!0})}patch(i,a){return this.http.patch(`${this.url}/${this.controller}/${i}`,a,{withCredentials:!0})}static#t=this.\u0275fac=function(a){o.$Z()};static#e=this.\u0275prov=o.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})()},3382:(x,h,r)=>{r.d(h,{Z:()=>T});var u=r(3076),o=r(8737),m=r(9212);let c=(()=>{class n extends o.H{constructor(){super("super/classe")}static#t=this.\u0275fac=function(d){return new(d||n)};static#e=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),f=(()=>{class n extends o.H{constructor(){super("super/fiche")}static#t=this.\u0275fac=function(d){return new(d||n)};static#e=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),t=(()=>{class n extends o.H{constructor(){super("super/carte_memoire")}static#t=this.\u0275fac=function(d){return new(d||n)};static#e=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),i=(()=>{class n extends o.H{constructor(){super("super/quiz")}static#t=this.\u0275fac=function(d){return new(d||n)};static#e=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var a=r(2333),P=r(9497);let y=(()=>{class n extends o.H{constructor(){super("super/question")}getQuizQuestions(g){return this.http.get(`${this.url}/question/quiz/${g}`,{withCredentials:!0})}static#t=this.\u0275fac=function(d){return new(d||n)};static#e=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),w=(()=>{class n extends o.H{constructor(){super("super/role")}static#t=this.\u0275fac=function(d){return new(d||n)};static#e=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var C=r(213);let T=(()=>{class n{constructor(g){this.quizDataService=g,this.quiz=new i,this.users=new u.K,this.classes=new c,this.fiches=new f,this.cartes=new t,this.auth=new a.e,this.ia=new P.Z,this.question=new y,this.roles=new w}getQuizQuestions(g){return this.quizDataService.getQuizQuestions(g)}static#t=this.\u0275fac=function(d){return new(d||n)(m.LFG(C.m))};static#e=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()},3076:(x,h,r)=>{r.d(h,{K:()=>m});var u=r(8737),o=r(9212);let m=(()=>{class c extends u.H{constructor(){super("super/user")}static#t=this.\u0275fac=function(i){return new(i||c)};static#e=this.\u0275prov=o.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},553:(x,h,r)=>{r.d(h,{N:()=>o});const u="http://localhost:3000",o={production:!1,apiUrl:`${u}/api`,url:`${u}`}}}]);